<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NFL Madden Optimizer - DraftKings</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="logo" id="headerLogo" onclick="backToSportSelector()" style="cursor: pointer;">
            <svg width="28" height="28" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
            </svg>
            <h1 id="headerTitle">Showdown Optimizer</h1>
            <span id="headerBadge">Select Sport</span>
        </div>
        <div class="header-right">
            <div id="fileStatus" style="font-size: 0.85rem; color: var(--text-muted);">No file loaded</div>
        </div>
    </header>

    <!-- Sport Selector (shown first) -->
    <div class="sport-selector" id="sportSelector">
        <h1>Showdown Optimizer</h1>
        <p>Select a sport to begin</p>
        <div class="sport-cards">
            <div class="sport-card" data-sport="madden" onclick="selectSport('madden')">
                <div class="sport-card-icon">üéÆ</div>
                <div class="sport-card-name">Madden</div>
                <div class="sport-card-status ready">Ready</div>
            </div>
            <div class="sport-card disabled" data-sport="nfl">
                <div class="sport-card-icon">üèà</div>
                <div class="sport-card-name">NFL</div>
                <div class="sport-card-status">Coming Soon</div>
            </div>
            <div class="sport-card" data-sport="nba" onclick="selectSport('nba')">
                <div class="sport-card-icon">üèÄ</div>
                <div class="sport-card-name">NBA</div>
                <div class="sport-card-status ready">Ready</div>
            </div>
            <div class="sport-card disabled" data-sport="mlb">
                <div class="sport-card-icon">‚öæ</div>
                <div class="sport-card-name">MLB</div>
                <div class="sport-card-status">Coming Soon</div>
            </div>
            <div class="sport-card disabled" data-sport="nhl">
                <div class="sport-card-icon">üèí</div>
                <div class="sport-card-name">NHL</div>
                <div class="sport-card-status">Coming Soon</div>
            </div>
            <div class="sport-card disabled" data-sport="nascar">
                <div class="sport-card-icon">üèéÔ∏è</div>
                <div class="sport-card-name">NASCAR</div>
                <div class="sport-card-status">Coming Soon</div>
            </div>
            <div class="sport-card disabled" data-sport="golf">
                <div class="sport-card-icon">‚õ≥</div>
                <div class="sport-card-name">Golf</div>
                <div class="sport-card-status">Coming Soon</div>
            </div>
            <div class="sport-card disabled" data-sport="tennis">
                <div class="sport-card-icon">üéæ</div>
                <div class="sport-card-name">Tennis</div>
                <div class="sport-card-status">Coming Soon</div>
            </div>
        </div>
    </div>

    <!-- Main Tab Navigation (hidden until sport selected) -->
    <nav class="main-tabs" id="mainTabs" style="display: none;">
        <div class="main-tab active" data-tab="showdown">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
            </svg>
            Madden SD
        </div>
        <div class="main-tab" data-tab="nba">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="10" stroke-width="2"/>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2zM2 12h20M12 2c2.5 2.5 4 6 4 10s-1.5 7.5-4 10c-2.5-2.5-4-6-4-10s1.5-7.5 4-10z"/>
            </svg>
            NBA SD
        </div>
        <div class="main-tab" data-tab="classic">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
            </svg>
            Madden Classic
        </div>
        <div class="main-tab" data-tab="playerdata">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
            </svg>
            Player Data
        </div>
        <div class="main-tab" data-tab="converter">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"/>
            </svg>
            Converter
        </div>
    </nav>

    <!-- Showdown Tab Content (hidden until sport selected) -->
    <div class="tab-content" id="showdownTab" style="display: none;">

    <!-- Main Container -->
    <div class="container">
        <!-- Stats Row -->
        <div class="stats-row">
            <div class="stat-card green">
                <div class="stat-card-label">DK Entries</div>
                <div class="stat-card-value" id="entriesLoaded">0</div>
                <div class="stat-card-sub">Contest entries</div>
            </div>
            <div class="stat-card purple">
                <div class="stat-card-label">Players Loaded</div>
                <div class="stat-card-value" id="playersLoaded">0</div>
                <div class="stat-card-sub">From CSV</div>
            </div>
            <div class="stat-card cyan">
                <div class="stat-card-label">Lineups Generated</div>
                <div class="stat-card-value" id="lineupsGenerated">0</div>
                <div class="stat-card-sub">Optimized</div>
            </div>
            <div class="stat-card amber">
                <div class="stat-card-label">Top Projection</div>
                <div class="stat-card-value positive" id="topProjection">0.00</div>
                <div class="stat-card-sub">Best Lineup</div>
            </div>
            <div class="stat-card red">
                <div class="stat-card-label">Avg Projection</div>
                <div class="stat-card-value" id="avgProjection">0.00</div>
                <div class="stat-card-sub">All Lineups</div>
            </div>
        </div>

        <!-- Upload & Settings Section -->
        <div class="grid-2">
            <!-- Upload Card -->
            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                        </svg>
                        Upload DraftKings Export
                    </div>
                </div>
                <div class="card-body">
                    <!-- Slate Selector -->
                    <div class="slate-selector" id="slateSelector">
                        <button class="slate-btn" data-slate="1">
                            <span class="slate-num">1</span>
                            <span class="slate-time">12:00</span>
                        </button>
                        <button class="slate-btn" data-slate="2">
                            <span class="slate-num">2</span>
                            <span class="slate-time">2:00</span>
                        </button>
                        <button class="slate-btn" data-slate="3">
                            <span class="slate-num">3</span>
                            <span class="slate-time">4:00</span>
                        </button>
                        <button class="slate-btn" data-slate="4">
                            <span class="slate-num">4</span>
                            <span class="slate-time">6:00</span>
                        </button>
                        <button class="slate-btn" data-slate="5">
                            <span class="slate-num">5</span>
                            <span class="slate-time">8:00</span>
                        </button>
                        <button class="slate-btn" data-slate="6">
                            <span class="slate-num">6</span>
                            <span class="slate-time">10:00</span>
                        </button>
                    </div>
                    
                    <!-- Current Slate Info -->
                    <div class="current-slate-info" id="currentSlateInfo">
                        <div class="slate-info-row">
                            <div class="slate-info-left">
                                <div class="slate-badge" id="slateBadge">1</div>
                                <div class="slate-details">
                                    <span class="teams" id="slateTeams">ATL @ TB</span>
                                    <span class="datetime" id="slateDateTime">11/24/2025 12:00 PM ET</span>
                                </div>
                            </div>
                            <div class="slate-info-right">
                                <span><span class="count" id="slatePlayerCount">0</span> players</span>
                                <span><span class="count" id="slateEntryCount">0</span> entries</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="upload-zone" id="uploadZone">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                        </svg>
                        <h3>Drop your DraftKings CSV here</h3>
                        <p>Entries + Player Pool export file</p>
                        <input type="file" id="csvInput" accept=".csv">
                    </div>
                </div>
            </div>

            <!-- Settings Card -->
            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                        </svg>
                        Optimizer Settings
                    </div>
                </div>
                <div class="card-body">
                    <div class="slider-group">
                        <div class="slider-header">
                            <label class="settings-label">Salary Range</label>
                            <span class="slider-values">$<span id="minSalaryValue">49,000</span> - $<span id="maxSalaryValue">50,000</span></span>
                        </div>
                        <div class="dual-slider-container">
                            <div class="slider-track"></div>
                            <div class="slider-range" id="salaryRange"></div>
                            <input type="range" class="dual-slider" id="minSalarySlider" min="40000" max="50000" value="49000" step="100">
                            <input type="range" class="dual-slider" id="maxSalarySlider" min="40000" max="50000" value="50000" step="100">
                        </div>
                        <div class="slider-labels">
                            <span>$40,000</span>
                            <span>$50,000</span>
                        </div>
                    </div>

                    <div class="slider-group">
                        <div class="slider-header">
                            <label class="settings-label">Projection Floor</label>
                            <span class="slider-value-highlight" id="projFloorValue">90.0%</span>
                        </div>
                        <input type="range" class="single-slider" id="projFloorSlider" min="80" max="100" value="90" step="0.5">
                        <div class="slider-labels">
                            <span>80%</span>
                            <span>100%</span>
                        </div>
                        <p class="slider-hint">Only include lineups within this % of the top projection</p>
                    </div>

                    <div class="settings-group">
                        <label class="settings-label">Number of Lineups to Generate</label>
                        <div class="settings-row">
                            <button class="lineup-count-btn active" data-count="100">100</button>
                            <button class="lineup-count-btn" data-count="500">500</button>
                            <button class="lineup-count-btn" data-count="2000">2,000</button>
                            <button class="lineup-count-btn" data-count="5000">5,000</button>
                        </div>
                    </div>

                    <div class="settings-group">
                        <label class="settings-label">Or Generate for Time Duration</label>
                        <div class="settings-row">
                            <button class="lineup-time-btn" data-seconds="10">10 sec</button>
                            <button class="lineup-time-btn" data-seconds="20">20 sec</button>
                            <button class="lineup-time-btn" data-seconds="30">30 sec</button>
                            <button class="lineup-time-btn" data-seconds="60">1 min</button>
                        </div>
                    </div>

                    <button class="btn btn-primary btn-lg" id="generateBtn" style="width: 100%;" disabled>
                        <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                        </svg>
                        Generate Lineups
                    </button>
                    
                    <button class="btn btn-all" id="processAllBtn">
                        <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
                        </svg>
                        ALL
                    </button>

                    <div class="progress-container" id="progressContainer">
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill" style="width: 0%;"></div>
                        </div>
                        <div class="progress-text" id="progressText">Generating lineups...</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Optimization Section -->
        <div class="card" id="optimizeCard" style="display: none;">
            <div class="optimize-banner">
                <div class="optimize-header">
                    <div class="optimize-title">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"/>
                        </svg>
                        <span>Entry Optimizer</span>
                    </div>
                    <div class="optimize-status" id="optimizeStatus"></div>
                </div>
                
                <div class="optimize-settings">
                    <div class="optimize-mode-group">
                        <label class="optimize-mode-label">Optimization Mode</label>
                        <div class="optimize-modes">
                            <button class="optimize-mode-btn active" data-mode="balanced" title="GPP entries get unique lineups, Cash entries share top lineup">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                                </svg>
                                Balanced
                            </button>
                            <button class="optimize-mode-btn" data-mode="cash" title="All entries use the highest projected lineup">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                </svg>
                                Cash
                            </button>
                            <button class="optimize-mode-btn" data-mode="paw-patrol" title="Portfolio-optimized GPP entries with anti-correlation">
                                üêæ Paw Patrol
                            </button>
                        </div>
                    </div>
                    
                    <div class="optimize-options">
                        <div class="optimize-option">
                            <label>Min Uniques</label>
                            <input type="number" id="minUniques" value="1" min="1" max="6" class="optimize-input">
                        </div>
                    </div>
                </div>
                
                <!-- Paw Patrol Settings (only visible when Paw Patrol mode selected) -->
                <div class="paw-patrol-settings" id="pawPatrolSettings" style="display: none;">
                    <div class="paw-patrol-header">
                        <span class="paw-patrol-title">üêæ Portfolio Optimization Settings</span>
                    </div>
                    <div class="diversity-slider-container">
                        <div class="diversity-slider-header">
                            <label>Diversity Strength</label>
                            <span class="diversity-value" id="diversityValue">5</span>
                        </div>
                        <input type="range" class="diversity-slider" id="diversitySlider" min="0" max="10" value="5" step="1">
                        <div class="diversity-labels">
                            <span>0 (Projection)</span>
                            <span>10 (Diversity)</span>
                        </div>
                        <p class="diversity-hint">Higher values prioritize anti-correlation between your lineups</p>
                    </div>
                    <div class="portfolio-summary" id="portfolioSummary" style="display: none;">
                        <div class="portfolio-summary-title">Portfolio Exposure</div>
                        <div class="portfolio-exposure-list" id="portfolioExposureList"></div>
                    </div>
                </div>
                
                <div class="optimize-buttons">
                    <button class="btn-optimize" id="optimizeBtn" disabled>
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                        </svg>
                        Optimize Entries
                    </button>
                    <button class="btn-export" id="exportEntriesBtn" disabled>
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
                        </svg>
                        Export to DraftKings
                    </button>
                </div>
            </div>
        </div>

        <!-- My Entries Section -->
        <div class="card" id="entriesCard" style="display: none;">
            <div class="card-header">
                <div class="card-title">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
                    </svg>
                    My DraftKings Entries
                    <span class="section-slate-badge" id="entriesSlateBadge"></span>
                </div>
                <div class="entries-summary">
                    <span id="entriesCount">0 entries</span>
                    <span class="entry-fee-total" id="totalEntryFees">$0.00 total</span>
                </div>
            </div>
            <div class="entries-grouped-container" id="entriesGroupedContainer">
            </div>
        </div>

        <!-- Player Pool -->
        <div class="card">
            <div class="card-header">
                <div class="card-title">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"/>
                    </svg>
                    Player Pool
                    <span class="section-slate-badge" id="playerPoolSlateBadge"></span>
                </div>
                <div style="font-size: 0.8rem; color: var(--text-muted);">
                    <span id="playerCount">0</span> players
                </div>
            </div>
            <div class="card-body" style="padding: 16px 20px 0;">
                <div class="filter-pills" id="positionFilters">
                    <span class="filter-pill active" data-pos="all">All</span>
                    <span class="filter-pill" data-pos="QB">QB</span>
                    <span class="filter-pill" data-pos="RB">RB</span>
                    <span class="filter-pill" data-pos="WR">WR</span>
                    <span class="filter-pill" data-pos="TE">TE</span>
                    <span class="filter-pill" data-pos="K">K</span>
                    <span class="filter-pill" data-pos="DST">DST</span>
                </div>
                <div class="search-input">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                    </svg>
                    <input type="text" id="playerSearch" placeholder="Search players...">
                </div>
            </div>
            <div class="table-container" id="playerPoolContainer">
                <div class="empty-state">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                    </svg>
                    <h4>No Players Loaded</h4>
                    <p>Upload a CSV file to load player projections</p>
                </div>
            </div>
        </div>

        <!-- Generated Lineups -->
        <div class="card" id="lineupsCard" style="display: none;">
            <div class="card-header">
                <div class="card-title">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
                    </svg>
                    Generated Lineups
                    <span class="section-slate-badge" id="lineupsSlateBadge"></span>
                </div>
                <div class="export-section">
                    <span style="font-size: 0.8rem; color: var(--text-muted);" id="lineupCountDisplay">0 lineups</span>
                    <button class="btn btn-secondary" id="clearLineupsBtn">
                        <svg width="14" height="14" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                        </svg>
                        Clear
                    </button>
                    <button class="btn btn-secondary" id="exportBtn">
                        <svg width="14" height="14" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
                        </svg>
                        Export CSV
                    </button>
                </div>
            </div>
            <div class="pagination-container" id="paginationTop" style="display: none;">
                <div class="pagination">
                    <button class="pagination-btn" id="prevPageTop" disabled>
                        <svg width="14" height="14" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                        </svg>
                        Prev
                    </button>
                    <span class="pagination-info" id="pageInfoTop">Page 1 of 1</span>
                    <button class="pagination-btn" id="nextPageTop">
                        Next
                        <svg width="14" height="14" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                        </svg>
                    </button>
                </div>
                <span class="pagination-showing" id="showingInfoTop">Showing 1-100</span>
            </div>
            </div>
            <div class="lineup-output" id="lineupOutput">
                <div class="lineup-row header">
                    <div class="sortable" data-sort="rank">Rank ‚áÖ</div>
                    <div>CPT</div>
                    <div>FLEX</div>
                    <div>FLEX</div>
                    <div>FLEX</div>
                    <div>FLEX</div>
                    <div>FLEX</div>
                    <div class="sortable" data-sort="salary">Salary ‚áÖ</div>
                    <div class="sortable sort-desc" data-sort="points">Points ‚Üì</div>
                </div>
                <div id="lineupRows"></div>
            </div>
            <div class="pagination" id="pagination" style="display: none;">
                <button class="btn btn-secondary pagination-btn" id="prevPage" disabled>
                    <svg width="14" height="14" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                    </svg>
                    Previous
                </button>
                <div class="pagination-info">
                    <span>Page <strong id="currentPageNum">1</strong> of <strong id="totalPages">1</strong></span>
                    <span class="pagination-range" id="paginationRange">(1-100 of 100)</span>
                </div>
                <button class="btn btn-secondary pagination-btn" id="nextPage">
                    Next
                    <svg width="14" height="14" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                    </svg>
                </button>
            </div>
        </div>
    </div>
    </div> <!-- End Showdown Tab -->

    <!-- NBA Tab Content -->
    <div class="tab-content" id="nbaTab" style="display: none;">
    <div class="container">
        <!-- Stats Row -->
        <div class="stats-row">
            <div class="stat-card green">
                <div class="stat-card-label">DK Entries</div>
                <div class="stat-card-value" id="nbaEntriesLoaded">0</div>
                <div class="stat-card-sub">Contest entries</div>
            </div>
            <div class="stat-card purple">
                <div class="stat-card-label">Players Loaded</div>
                <div class="stat-card-value" id="nbaPlayersLoaded">0</div>
                <div class="stat-card-sub">From CSV</div>
            </div>
            <div class="stat-card cyan">
                <div class="stat-card-label">Lineups Generated</div>
                <div class="stat-card-value" id="nbaLineupsGenerated">0</div>
                <div class="stat-card-sub">Optimized</div>
            </div>
            <div class="stat-card amber">
                <div class="stat-card-label">Top Projection</div>
                <div class="stat-card-value positive" id="nbaTopProjection">0.00</div>
                <div class="stat-card-sub">Best Lineup</div>
            </div>
            <div class="stat-card red">
                <div class="stat-card-label">Avg Projection</div>
                <div class="stat-card-value" id="nbaAvgProjection">0.00</div>
                <div class="stat-card-sub">All Lineups</div>
            </div>
        </div>

        <!-- Upload & Settings Section -->
        <div class="grid-2">
            <!-- Upload Card -->
            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                        </svg>
                        Upload DraftKings Export
                    </div>
                    <span class="file-status" id="nbaFileStatus">No file loaded</span>
                </div>
                <div class="card-body">
                    <div class="slate-selector" id="nbaSlateSelector">
                        <button class="slate-btn" data-slate="1"><span class="slate-num">1</span><span class="slate-time">7:00</span></button>
                        <button class="slate-btn" data-slate="2"><span class="slate-num">2</span><span class="slate-time">8:00</span></button>
                        <button class="slate-btn" data-slate="3"><span class="slate-num">3</span><span class="slate-time">9:00</span></button>
                        <button class="slate-btn" data-slate="4"><span class="slate-num">4</span><span class="slate-time">10:00</span></button>
                        <button class="slate-btn" data-slate="5"><span class="slate-num">5</span><span class="slate-time">11:00</span></button>
                        <button class="slate-btn" data-slate="6"><span class="slate-num">6</span><span class="slate-time">12:00</span></button>
                    </div>
                    <div class="current-slate-info" id="nbaCurrentSlateInfo">
                        <div class="slate-info-row">
                            <div class="slate-info-left">
                                <div class="slate-badge" id="nbaSlateBadge">1</div>
                                <div class="slate-details">
                                    <span class="teams" id="nbaSlateTeams">LAL @ BOS</span>
                                    <span class="datetime" id="nbaSlateDateTime">7:00 PM ET</span>
                                </div>
                            </div>
                            <div class="slate-info-right">
                                <span><span class="count" id="nbaSlatePlayerCount">0</span> players</span>
                                <span><span class="count" id="nbaSlateEntryCount">0</span> entries</span>
                            </div>
                        </div>
                    </div>
                    <div class="upload-zone" id="nbaUploadZone">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                        </svg>
                        <h3>Drop your DraftKings CSV here</h3>
                        <p>Entries + Player Pool export file</p>
                        <input type="file" id="nbaCsvInput" accept=".csv">
                    </div>
                </div>
            </div>

            <!-- Settings Card -->
            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                        </svg>
                        Optimizer Settings
                    </div>
                </div>
                <div class="card-body">
                    <div class="slider-group">
                        <div class="slider-header">
                            <label class="settings-label">Salary Range</label>
                            <span class="slider-values">$<span id="nbaMinSalaryValue">49,000</span> - $<span id="nbaMaxSalaryValue">50,000</span></span>
                        </div>
                        <div class="dual-slider">
                            <div class="slider-track"><div class="slider-range" id="nbaSalaryRange"></div></div>
                            <input type="range" id="nbaMinSalarySlider" min="40000" max="50000" value="49000" step="500">
                            <input type="range" id="nbaMaxSalarySlider" min="40000" max="50000" value="50000" step="500">
                        </div>
                    </div>
                    <div class="slider-group">
                        <div class="slider-header">
                            <label class="settings-label">Projection Floor</label>
                            <span class="slider-values" id="nbaProjFloorValue">90.0%</span>
                        </div>
                        <input type="range" id="nbaProjFloorSlider" min="50" max="100" value="90" step="0.5" class="single-slider">
                    </div>
                    <div class="settings-row">
                        <label class="settings-label">Lineup Count</label>
                        <div class="button-group">
                            <button class="lineup-count-btn" data-count="20">20</button>
                            <button class="lineup-count-btn active" data-count="100">100</button>
                            <button class="lineup-count-btn" data-count="150">150</button>
                            <button class="lineup-time-btn" data-seconds="30">30s</button>
                            <button class="lineup-time-btn" data-seconds="60">60s</button>
                        </div>
                    </div>
                    <button class="btn btn-primary btn-generate" id="nbaGenerateBtn" disabled>
                        <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                        </svg>
                        Generate Lineups
                    </button>
                    <div class="progress-container" id="nbaProgressContainer">
                        <div class="progress-bar"><div class="progress-fill" id="nbaProgressFill"></div></div>
                        <div class="progress-text" id="nbaProgressText">Generating...</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Entries Card -->
        <div class="card" id="nbaEntriesCard" style="display: none;">
            <div class="card-header">
                <div class="card-title">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
                    </svg>
                    My DraftKings Entries
                    <span class="section-slate-badge" id="nbaEntriesSlateBadge"></span>
                </div>
                <div class="entries-summary">
                    <span id="nbaEntriesCount">0 entries</span>
                    <span class="entry-fee-total" id="nbaTotalEntryFees">$0.00 total</span>
                </div>
            </div>
            <div class="entries-grouped-container" id="nbaEntriesGroupedContainer"></div>
        </div>

        <!-- Player Pool -->
        <div class="card">
            <div class="card-header">
                <div class="card-title">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"/>
                    </svg>
                    Player Pool
                    <span class="section-slate-badge" id="nbaPlayerPoolSlateBadge"></span>
                </div>
                <div style="font-size: 0.8rem; color: var(--text-muted);">
                    <span id="nbaPlayerCount">0</span> players
                </div>
            </div>
            <div class="card-body" style="padding: 16px 20px 0;">
                <div class="pool-view-toggle" id="nbaPoolViewToggle">
                    <button class="pool-view-btn active" data-view="cpt">CPT</button>
                    <button class="pool-view-btn" data-view="flex">FLEX</button>
                </div>
                <div class="filter-pills" id="nbaPositionFilters">
                    <span class="filter-pill active" data-pos="all">All</span>
                    <span class="filter-pill" data-pos="PG">PG</span>
                    <span class="filter-pill" data-pos="SG">SG</span>
                    <span class="filter-pill" data-pos="SF">SF</span>
                    <span class="filter-pill" data-pos="PF">PF</span>
                    <span class="filter-pill" data-pos="C">C</span>
                </div>
                <div class="search-input">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                    </svg>
                    <input type="text" id="nbaPlayerSearch" placeholder="Search players...">
                </div>
            </div>
            <div class="table-container" id="nbaPlayerPoolContainer">
                <div class="empty-state">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                    </svg>
                    <h4>No Players Loaded</h4>
                    <p>Upload a CSV file to load player projections</p>
                </div>
            </div>
        </div>

        <!-- Generated Lineups -->
        <div class="card" id="nbaLineupsCard" style="display: none;">
            <div class="card-header">
                <div class="card-title">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
                    </svg>
                    Generated Lineups
                    <span class="section-slate-badge" id="nbaLineupsSlateBadge"></span>
                </div>
                <div class="export-section">
                    <span style="font-size: 0.8rem; color: var(--text-muted);" id="nbaLineupCountDisplay">0 lineups</span>
                    <button class="btn btn-secondary" id="nbaClearLineupsBtn">
                        <svg width="14" height="14" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                        </svg>
                        Clear
                    </button>
                    <button class="btn btn-secondary" id="nbaExportBtn">
                        <svg width="14" height="14" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
                        </svg>
                        Export CSV
                    </button>
                </div>
            </div>
            <div class="pagination-container" id="nbaPaginationTop" style="display: none;">
                <div class="pagination">
                    <button class="pagination-btn" id="nbaPrevPageTop" disabled>
                        <svg width="14" height="14" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                        </svg>
                        Prev
                    </button>
                    <span class="pagination-info" id="nbaPageInfoTop">Page 1 of 1</span>
                    <button class="pagination-btn" id="nbaNextPageTop">
                        Next
                        <svg width="14" height="14" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                        </svg>
                    </button>
                </div>
                <span class="pagination-showing" id="nbaShowingInfoTop">Showing 1-100</span>
            </div>
            <div class="lineup-output nba-lineup-output" id="nbaLineupOutput">
                <div class="lineup-row header">
                    <div class="sortable" data-sort="rank">Rank ‚áÖ</div>
                    <div>CPT</div>
                    <div>FLEX</div>
                    <div>FLEX</div>
                    <div>FLEX</div>
                    <div>FLEX</div>
                    <div>FLEX</div>
                    <div class="sortable" data-sort="salary">Salary ‚áÖ</div>
                    <div class="sortable sort-desc" data-sort="points">Points ‚Üì</div>
                    <div class="sortable pctl-col" data-sort="pctl25">25th ‚áÖ</div>
                    <div class="sortable pctl-col" data-sort="pctl75">75th ‚áÖ</div>
                    <div class="sortable pctl-col" data-sort="pctl85">85th ‚áÖ</div>
                    <div class="sortable pctl-col" data-sort="pctl95">95th ‚áÖ</div>
                    <div class="sortable pctl-col" data-sort="std">STD ‚áÖ</div>
                </div>
                <div id="nbaLineupRows"></div>
            </div>
        </div>

        <!-- Optimize Card -->
        <div class="card" id="nbaOptimizeCard" style="display: none;">
            <div class="card-header">
                <div class="card-title">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/>
                    </svg>
                    Assign Lineups to Entries
                </div>
            </div>
            <div class="card-body">
                <div class="optimize-status" id="nbaOptimizeStatus">Select optimization mode and click Optimize</div>
                <div class="optimize-modes">
                    <button class="optimize-mode-btn active" data-mode="balanced">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/></svg>
                        <span>Balanced</span>
                        <small>Cash=Top, GPP=Unique</small>
                    </button>
                    <button class="optimize-mode-btn" data-mode="cash">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                        <span>Cash Mode</span>
                        <small>All entries get #1</small>
                    </button>
                    <button class="optimize-mode-btn" data-mode="paw-patrol">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"/></svg>
                        <span>Paw Patrol</span>
                        <small>Portfolio diversity</small>
                    </button>
                </div>
                <div id="nbaPawPatrolSettings" style="display: none;">
                    <div class="slider-group">
                        <div class="slider-header">
                            <label class="settings-label">Diversity Strength</label>
                            <span id="nbaDiversityValue">5</span>
                        </div>
                        <input type="range" id="nbaDiversitySlider" min="1" max="10" value="5" class="single-slider">
                    </div>
                </div>
                <div class="optimize-actions">
                    <button class="btn btn-primary" id="nbaOptimizeBtn" disabled>
                        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
                        Optimize Entries
                    </button>
                    <button class="btn btn-secondary" id="nbaExportEntriesBtn" disabled>
                        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/></svg>
                        Export Entries
                    </button>
                </div>
                <div class="portfolio-summary" id="nbaPortfolioSummary" style="display: none;">
                    <h4>Portfolio Exposure</h4>
                    <div class="exposure-list" id="nbaPortfolioExposureList"></div>
                </div>
            </div>
        </div>
    </div>
    </div> <!-- End NBA Tab -->

    <!-- Classic Tab Content (hidden until sport selected) -->
    <div class="tab-content" id="classicTab" style="display: none;">
        <div class="container">
            <!-- Stats Row -->
            <div class="stats-row">
                <div class="stat-card green">
                    <div class="stat-card-label">DK Entries</div>
                    <div class="stat-card-value" id="classicEntriesLoaded">0</div>
                    <div class="stat-card-sub">Contest entries</div>
                </div>
                <div class="stat-card purple">
                    <div class="stat-card-label">Players Loaded</div>
                    <div class="stat-card-value" id="classicPlayersLoaded">0</div>
                    <div class="stat-card-sub">From CSV</div>
                </div>
                <div class="stat-card cyan">
                    <div class="stat-card-label">Lineups Generated</div>
                    <div class="stat-card-value" id="classicLineupsGenerated">0</div>
                    <div class="stat-card-sub">Optimized</div>
                </div>
                <div class="stat-card amber">
                    <div class="stat-card-label">Top Projection</div>
                    <div class="stat-card-value positive" id="classicTopProjection">0.00</div>
                    <div class="stat-card-sub">Best Lineup</div>
                </div>
                <div class="stat-card red">
                    <div class="stat-card-label">Avg Score</div>
                    <div class="stat-card-value" id="classicAvgScore">0.00</div>
                    <div class="stat-card-sub">Proj + Corr</div>
                </div>
            </div>

            <!-- Upload & Settings Section -->
            <div class="grid-2">
                <!-- Upload Card -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                            </svg>
                            Upload DraftKings Export
                        </div>
                    </div>
                    <div class="card-body">
                        <!-- Slate Selector -->
                        <!-- Slate Selector - Classic has 2 slates (3 games each) -->
                        <div class="slate-selector" id="classicSlateSelector">
                            <button class="slate-btn" data-slate="1">
                                <span class="slate-num">1</span>
                                <span class="slate-time">Early (12-4)</span>
                            </button>
                            <button class="slate-btn" data-slate="2">
                                <span class="slate-num">2</span>
                                <span class="slate-time">Late (6-10)</span>
                            </button>
                        </div>
                        
                        <!-- Current Slate Info -->
                        <div class="current-slate-info" id="classicCurrentSlateInfo">
                            <div class="slate-info-row">
                                <div class="slate-info-left">
                                    <div class="slate-badge" id="classicSlateBadge">1</div>
                                    <div class="slate-details">
                                        <span class="teams" id="classicSlateTeams">No slate selected</span>
                                        <span class="datetime" id="classicSlateDateTime">Upload CSV to load slates</span>
                                    </div>
                                </div>
                                <div class="slate-info-right">
                                    <span><span class="count" id="classicSlatePlayerCount">0</span> players</span>
                                    <span><span class="count" id="classicSlateEntryCount">0</span> entries</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="upload-zone" id="classicUploadZone">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                            </svg>
                            <h3>Drop your DraftKings CSV here</h3>
                            <p>Entries + Player Pool export file</p>
                            <input type="file" id="classicCsvInput" accept=".csv">
                        </div>
                    </div>
                </div>

                <!-- Settings Card -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                            </svg>
                            Optimizer Settings
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="slider-group">
                            <div class="slider-header">
                                <label class="settings-label">Salary Range</label>
                                <span class="slider-values">$<span id="classicMinSalaryValue">45,000</span> - $<span id="classicMaxSalaryValue">50,000</span></span>
                            </div>
                            <div class="dual-slider-container">
                                <div class="slider-track"></div>
                                <div class="slider-range" id="classicSalaryRange"></div>
                                <input type="range" class="dual-slider" id="classicMinSalarySlider" min="40000" max="50000" value="45000" step="100">
                                <input type="range" class="dual-slider" id="classicMaxSalarySlider" min="40000" max="50000" value="50000" step="100">
                            </div>
                            <div class="slider-labels">
                                <span>$40,000</span>
                                <span>$50,000</span>
                            </div>
                        </div>

                        <div class="slider-group">
                            <div class="slider-header">
                                <label class="settings-label">Projection Floor</label>
                                <span class="slider-value-highlight" id="classicProjFloorValue">90.0%</span>
                            </div>
                            <input type="range" class="single-slider" id="classicProjFloorSlider" min="80" max="100" value="90" step="0.5">
                            <div class="slider-labels">
                                <span>80%</span>
                                <span>100%</span>
                            </div>
                            <p class="slider-hint">Only include lineups within this % of the top projection</p>
                        </div>

                        <div class="settings-group">
                            <label class="settings-label">Number of Lineups to Generate</label>
                            <div class="settings-row" id="classicLineupCountBtns">
                                <button class="lineup-count-btn active" data-count="100">100</button>
                                <button class="lineup-count-btn" data-count="500">500</button>
                                <button class="lineup-count-btn" data-count="2000">2,000</button>
                                <button class="lineup-count-btn" data-count="5000">5,000</button>
                            </div>
                        </div>

                        <div class="settings-group">
                            <label class="settings-label">Or Generate for Time Duration</label>
                            <div class="settings-row" id="classicTimeBtns">
                                <button class="lineup-time-btn" data-seconds="10">10 sec</button>
                                <button class="lineup-time-btn" data-seconds="20">20 sec</button>
                                <button class="lineup-time-btn" data-seconds="30">30 sec</button>
                                <button class="lineup-time-btn" data-seconds="60">1 min</button>
                            </div>
                        </div>

                        <button class="btn btn-primary btn-lg" id="classicGenerateBtn" style="width: 100%;" disabled>
                            <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                            </svg>
                            Generate Lineups
                        </button>
                        
                        <button class="btn btn-all" id="classicProcessAllBtn">
                            <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
                            </svg>
                            ALL
                        </button>

                        <div class="progress-container" id="classicProgressContainer">
                            <div class="progress-bar">
                                <div class="progress-fill" id="classicProgressFill" style="width: 0%;"></div>
                            </div>
                            <div class="progress-text" id="classicProgressText">Generating lineups...</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Entry Optimizer Section -->
            <div class="card" id="classicOptimizeCard" style="display: none;">
                <div class="optimize-banner">
                    <div class="optimize-header">
                        <div class="optimize-title">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"/>
                            </svg>
                            <span>Entry Optimizer</span>
                        </div>
                        <div class="optimize-status" id="classicOptimizeStatus"></div>
                    </div>
                    
                    <div class="optimize-settings">
                        <div class="optimize-mode-group">
                            <label class="optimize-mode-label">Optimization Mode</label>
                            <div class="optimize-modes" id="classicOptimizeModes">
                                <button class="optimize-mode-btn" data-mode="balanced">
                                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                                    </svg>
                                    Balanced
                                </button>
                                <button class="optimize-mode-btn" data-mode="cash">
                                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                    </svg>
                                    Cash
                                </button>
                                <button class="optimize-mode-btn active" data-mode="paw-patrol">
                                    üêæ Paw Patrol
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Paw Patrol Settings -->
                    <div class="paw-patrol-settings" id="classicPawPatrolSettings">
                        <div class="paw-patrol-header">
                            <span class="paw-patrol-title">üêæ Portfolio Optimization Settings</span>
                        </div>
                        <div class="diversity-slider-container">
                            <div class="diversity-slider-header">
                                <label>Diversity Strength</label>
                                <span class="diversity-value" id="classicDiversityValue">5</span>
                            </div>
                            <input type="range" class="diversity-slider" id="classicDiversitySlider" min="0" max="10" value="5" step="1">
                            <div class="diversity-labels">
                                <span>0 (Projection)</span>
                                <span>10 (Diversity)</span>
                            </div>
                            <p class="diversity-hint">Higher values prioritize anti-correlation between your lineups</p>
                        </div>
                    </div>
                    
                    <div class="optimize-buttons">
                        <button class="btn-optimize" id="classicOptimizeBtn" disabled>
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                            </svg>
                            Optimize Entries
                        </button>
                        <button class="btn-export" id="classicExportEntriesBtn" disabled>
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
                            </svg>
                            Export to DraftKings
                        </button>
                    </div>
                </div>
            </div>

            <!-- My Entries Section -->
            <div class="card" id="classicEntriesCard" style="display: none;">
                <div class="card-header">
                    <div class="card-title">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
                        </svg>
                        My DraftKings Entries
                        <span class="section-slate-badge" id="classicEntriesSlateBadge"></span>
                    </div>
                    <div class="entries-summary">
                        <span id="classicEntriesCount">0 entries</span>
                        <span class="entry-fee-total" id="classicTotalEntryFees">$0.00 total</span>
                    </div>
                </div>
                <div class="entries-grouped-container" id="classicEntriesGroupedContainer">
                </div>
            </div>

            <!-- Player Pool -->
            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"/>
                        </svg>
                        Player Pool
                        <span class="section-slate-badge" id="classicPlayerPoolSlateBadge"></span>
                    </div>
                    <div style="font-size: 0.8rem; color: var(--text-muted);">
                        <span id="classicPlayerCount">0</span> players
                    </div>
                </div>
                <div class="card-body" style="padding: 16px 20px 0;">
                    <div class="filter-pills" id="classicPositionFilters">
                        <span class="filter-pill active" data-pos="all">All</span>
                        <span class="filter-pill" data-pos="QB">QB</span>
                        <span class="filter-pill" data-pos="RB">RB</span>
                        <span class="filter-pill" data-pos="WR">WR</span>
                        <span class="filter-pill" data-pos="TE">TE</span>
                        <span class="filter-pill" data-pos="DST">DST</span>
                    </div>
                    <div class="search-input">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                        </svg>
                        <input type="text" id="classicPlayerSearch" placeholder="Search players...">
                    </div>
                </div>
                <div class="table-container" id="classicPlayerPoolContainer">
                    <div class="empty-state">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                        </svg>
                        <h4>No Players Loaded</h4>
                        <p>Upload a CSV file to load player projections</p>
                    </div>
                </div>
            </div>

            <!-- Generated Lineups -->
            <div class="card" id="classicLineupsCard" style="display: none;">
                <div class="card-header">
                    <div class="card-title">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
                        </svg>
                        Generated Lineups
                        <span class="section-slate-badge" id="classicLineupsSlateBadge"></span>
                    </div>
                    <div class="export-section">
                        <span style="font-size: 0.8rem; color: var(--text-muted);" id="classicLineupCountDisplay">0 lineups</span>
                        <button class="btn btn-secondary" id="classicClearLineupsBtn">
                            <svg width="14" height="14" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                            </svg>
                            Clear
                        </button>
                        <button class="btn btn-secondary" id="classicExportBtn">
                            <svg width="14" height="14" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
                            </svg>
                            Export CSV
                        </button>
                    </div>
                </div>
                <div class="classic-lineup-output" id="classicLineupOutput">
                    <div class="classic-lineup-row header">
                        <div class="sortable" data-sort="rank">Rank</div>
                        <div>QB</div>
                        <div>RB</div>
                        <div>RB</div>
                        <div>WR</div>
                        <div>WR</div>
                        <div>WR</div>
                        <div>TE</div>
                        <div>FLEX</div>
                        <div>DST</div>
                        <div class="sortable" data-sort="salary">Salary</div>
                        <div class="sortable sort-desc" data-sort="score">Score</div>
                    </div>
                    <div id="classicLineupRows"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Player Data Tab Content (hidden until sport selected) -->
    <div class="tab-content" id="playerdataTab" style="display: none;">
        <div class="container">
            <!-- Stats Row for Player Data -->
            <div class="stats-row">
                <div class="stat-card green">
                    <div class="stat-card-label">Total Records</div>
                    <div class="stat-card-value" id="pdTotalRecords">0</div>
                    <div class="stat-card-sub">Game logs loaded</div>
                </div>
                <div class="stat-card purple">
                    <div class="stat-card-label">Unique Players</div>
                    <div class="stat-card-value" id="pdUniquePlayers">0</div>
                    <div class="stat-card-sub">Across all positions</div>
                </div>
                <div class="stat-card cyan">
                    <div class="stat-card-label">Correlations</div>
                    <div class="stat-card-value" id="pdCorrelations">0</div>
                    <div class="stat-card-sub">Computed pairs</div>
                </div>
                <div class="stat-card amber">
                    <div class="stat-card-label">Teams</div>
                    <div class="stat-card-value" id="pdTeams">0</div>
                    <div class="stat-card-sub">NFL teams</div>
                </div>
                <div class="stat-card red">
                    <div class="stat-card-label">Status</div>
                    <div class="stat-card-value" id="pdStatus" style="font-size: 1rem;">Not Ready</div>
                    <div class="stat-card-sub">Upload all files</div>
                </div>
            </div>

            <!-- Upload Cards Grid -->
            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                        </svg>
                        Upload Player Game History Files
                    </div>
                    <button class="btn btn-primary" id="computeCorrelationsBtn" disabled>
                        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                        </svg>
                        Compute Correlations
                    </button>
                </div>
                <div class="card-body">
                    <div class="player-data-grid">
                        <!-- ALL Upload Card -->
                        <div class="pd-upload-card all-card" id="pdAllCard">
                            <div class="pd-upload-header">
                                <div class="pd-position-badge all">ALL</div>
                                <span>All Positions</span>
                            </div>
                            <div class="pd-upload-zone" id="pdAllZone">
                                <input type="file" id="pdAllInput" accept=".csv" multiple style="display: none;">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                                </svg>
                                <span>Ctrl+Click to select all files</span>
                                <span class="upload-hint">Files auto-detected by name</span>
                            </div>
                            <div class="pd-upload-status" id="pdAllStatus">
                                <div class="all-files-status">
                                    <div class="file-indicator" data-pos="QB" title="QB"></div>
                                    <div class="file-indicator" data-pos="RB" title="RB"></div>
                                    <div class="file-indicator" data-pos="WR" title="WR"></div>
                                    <div class="file-indicator" data-pos="TE" title="TE"></div>
                                    <div class="file-indicator" data-pos="DST" title="DST"></div>
                                </div>
                            </div>
                        </div>

                        <!-- QB Upload -->
                        <div class="pd-upload-card" id="pdQBCard">
                            <div class="pd-upload-header">
                                <div class="pd-position-badge qb">QB</div>
                                <span>Quarterbacks</span>
                            </div>
                            <div class="pd-upload-zone" id="pdQBZone">
                                <input type="file" id="pdQBInput" accept=".csv" style="display: none;">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                                </svg>
                                <span>Drop CSV or click</span>
                            </div>
                            <div class="pd-upload-status" id="pdQBStatus">
                                <span class="pd-status-text">No file loaded</span>
                            </div>
                        </div>

                        <!-- RB Upload -->
                        <div class="pd-upload-card" id="pdRBCard">
                            <div class="pd-upload-header">
                                <div class="pd-position-badge rb">RB</div>
                                <span>Running Backs</span>
                            </div>
                            <div class="pd-upload-zone" id="pdRBZone">
                                <input type="file" id="pdRBInput" accept=".csv" style="display: none;">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                                </svg>
                                <span>Drop CSV or click</span>
                            </div>
                            <div class="pd-upload-status" id="pdRBStatus">
                                <span class="pd-status-text">No file loaded</span>
                            </div>
                        </div>

                        <!-- WR Upload -->
                        <div class="pd-upload-card" id="pdWRCard">
                            <div class="pd-upload-header">
                                <div class="pd-position-badge wr">WR</div>
                                <span>Wide Receivers</span>
                            </div>
                            <div class="pd-upload-zone" id="pdWRZone">
                                <input type="file" id="pdWRInput" accept=".csv" style="display: none;">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                                </svg>
                                <span>Drop CSV or click</span>
                            </div>
                            <div class="pd-upload-status" id="pdWRStatus">
                                <span class="pd-status-text">No file loaded</span>
                            </div>
                        </div>

                        <!-- TE Upload -->
                        <div class="pd-upload-card" id="pdTECard">
                            <div class="pd-upload-header">
                                <div class="pd-position-badge te">TE</div>
                                <span>Tight Ends</span>
                            </div>
                            <div class="pd-upload-zone" id="pdTEZone">
                                <input type="file" id="pdTEInput" accept=".csv" style="display: none;">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                                </svg>
                                <span>Drop CSV or click</span>
                            </div>
                            <div class="pd-upload-status" id="pdTEStatus">
                                <span class="pd-status-text">No file loaded</span>
                            </div>
                        </div>

                        <!-- DST Upload -->
                        <div class="pd-upload-card" id="pdDSTCard">
                            <div class="pd-upload-header">
                                <div class="pd-position-badge dst">DST</div>
                                <span>Defense/ST</span>
                            </div>
                            <div class="pd-upload-zone" id="pdDSTZone">
                                <input type="file" id="pdDSTInput" accept=".csv" style="display: none;">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                                </svg>
                                <span>Drop CSV or click</span>
                            </div>
                            <div class="pd-upload-status" id="pdDSTStatus">
                                <span class="pd-status-text">No file loaded</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Correlation Results Card -->
            <div class="card" id="correlationResultsCard" style="display: none;">
                <div class="card-header">
                    <div class="card-title">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                        </svg>
                        Position-to-Position Correlations (League Average)
                    </div>
                </div>
                <div class="card-body">
                    <div class="position-matrix" id="positionMatrix">
                        <!-- Header Row -->
                        <div class="matrix-cell header"></div>
                        <div class="matrix-cell header">QB</div>
                        <div class="matrix-cell header">RB</div>
                        <div class="matrix-cell header">WR</div>
                        <div class="matrix-cell header">TE</div>
                        <div class="matrix-cell header">DST</div>
                        <!-- Filled by JS -->
                    </div>
                    <p style="font-size: 0.75rem; color: var(--text-muted); margin-top: 12px; text-align: center;">
                        üü¢ Positive = Good to stack together | üî¥ Negative = Avoid pairing | Based on teammate game-by-game correlations
                    </p>
                </div>
            </div>

            <!-- Team Correlations Grid -->
            <div class="card team-cards-container" id="teamCardsContainer" style="display: none;">
                <div class="card-header">
                    <div class="card-title">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/>
                        </svg>
                        Team Correlation Stacks
                    </div>
                    <span style="font-size: 0.8rem; color: var(--text-muted);">Click a team for full details</span>
                </div>
                <div class="card-body">
                    <div class="team-cards-grid" id="teamCardsGrid">
                        <!-- Filled by JS -->
                    </div>
                </div>
            </div>

            <!-- Position Pair Deep Dive -->
            <div class="card" id="positionPairCard" style="display: none;">
                <div class="card-header">
                    <div class="card-title">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/>
                        </svg>
                        Position Pair Correlations
                    </div>
                </div>
                <div class="card-body">
                    <div class="position-pair-tabs" id="positionPairTabs">
                        <div class="position-pair-tab active" data-pair="QB-WR">QB + WR</div>
                        <div class="position-pair-tab" data-pair="QB-TE">QB + TE</div>
                        <div class="position-pair-tab" data-pair="QB-RB">QB + RB</div>
                        <div class="position-pair-tab" data-pair="WR-WR">WR + WR</div>
                        <div class="position-pair-tab" data-pair="RB-WR">RB + WR</div>
                        <div class="position-pair-tab" data-pair="RB-TE">RB + TE</div>
                        <div class="position-pair-tab" data-pair="TE-WR">TE + WR</div>
                    </div>
                    <div class="correlation-table" id="positionPairTable">
                        <!-- Filled by JS -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Converter Tab Content (hidden until sport selected) -->
    <div class="tab-content" id="converterTab" style="display: none;">
        <div class="container">
            <!-- Stats Row for Converter -->
            <div class="stats-row">
                <div class="stat-card green">
                    <div class="stat-card-label">Players Parsed</div>
                    <div class="stat-card-value" id="cvPlayersParsed">0</div>
                    <div class="stat-card-sub">This session</div>
                </div>
                <div class="stat-card purple">
                    <div class="stat-card-label">Records Added</div>
                    <div class="stat-card-value" id="cvRecordsAdded">0</div>
                    <div class="stat-card-sub">Game logs</div>
                </div>
                <div class="stat-card cyan">
                    <div class="stat-card-label">Current Position</div>
                    <div class="stat-card-value" id="cvCurrentPosition">‚Äî</div>
                    <div class="stat-card-sub">Detected</div>
                </div>
                <div class="stat-card amber">
                    <div class="stat-card-label">Current Player</div>
                    <div class="stat-card-value" id="cvCurrentPlayer" style="font-size: 0.9rem;">‚Äî</div>
                    <div class="stat-card-sub">Name</div>
                </div>
                <div class="stat-card red">
                    <div class="stat-card-label">Status</div>
                    <div class="stat-card-value" id="cvStatus" style="font-size: 1rem;">Ready</div>
                    <div class="stat-card-sub">Paste data below</div>
                </div>
            </div>

            <!-- Reset Session Button -->
            <div style="margin-bottom: 1rem; text-align: right;">
                <button class="btn btn-secondary" id="cvResetSessionBtn" title="Clear all parsed data and start fresh">
                    <svg width="14" height="14" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                    </svg>
                    Reset Session
                </button>
            </div>

            <!-- Main Converter Card -->
            <div class="grid-2">
                <!-- Paste Data Card -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
                            </svg>
                            Paste DraftKings Player Data
                        </div>
                        <button class="btn btn-secondary" id="cvClearBtn">
                            <svg width="14" height="14" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                            </svg>
                            Clear
                        </button>
                    </div>
                    <div class="card-body">
                        <p style="font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px;">
                            Copy the game log table from a DraftKings player page (Week, FPTS, Salary, etc.) and paste below.
                        </p>
                        <textarea id="cvPasteArea" class="converter-textarea" placeholder="Paste player game log data here...

Example format from DraftKings player page:
Week  FPTS   Salary   Matchup   Pass Yds  Pass TD  INT  Rush Yds...
1     24.5   $7,200   vs TB     285       2        1    15
2     18.3   $7,000   @ KC      198       1        0    22
..."></textarea>
                        <div class="converter-buttons">
                            <button class="btn btn-primary" id="cvParseBtn">
                                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"/>
                                </svg>
                                Parse Data
                            </button>
                            <!-- Add to Player Data button hidden - auto-add on parse now -->
                            <button class="btn btn-secondary" id="cvAddToDataBtn" style="display: none;" disabled>
                                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
                                </svg>
                                Add to Player Data
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Player Info & Preview Card -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                            </svg>
                            Player Info
                        </div>
                    </div>
                    <div class="card-body">
                        <!-- Player Info Display (shown after parsing) -->
                        <div class="converter-player-info" id="cvPlayerInfo" style="display: none;"></div>

                        <!-- Manual Override Section - Only shown if auto-detect fails -->
                        <div class="cv-manual-override" id="cvManualOverride">
                            <h4 style="font-size: 0.8rem; color: var(--text-muted); margin-bottom: 10px;">Manual Override (if auto-detect fails)</h4>
                            <div class="cv-override-row">
                                <div class="cv-override-field">
                                    <label>Player Name</label>
                                    <input type="text" id="cvPlayerName" placeholder="Auto-detected">
                                </div>
                                <div class="cv-override-field">
                                    <label>Team</label>
                                    <select id="cvPlayerTeam">
                                        <option value="">Auto-detect</option>
                                    </select>
                                </div>
                                <div class="cv-override-field">
                                    <label>Position</label>
                                    <select id="cvPlayerPosition">
                                        <option value="">Auto-detect</option>
                                        <option value="QB">QB</option>
                                        <option value="RB">RB</option>
                                        <option value="WR">WR</option>
                                        <option value="TE">TE</option>
                                        <option value="DST">DST</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Parsed Data Preview -->
            <div class="card" id="cvPreviewCard" style="display: none;">
                <div class="card-header">
                    <div class="card-title">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                        </svg>
                        Parsed Game Logs
                        <span class="section-slate-badge" id="cvPreviewCount">0 records</span>
                    </div>
                    <button class="btn btn-secondary" id="cvExportPreviewBtn">
                        <svg width="14" height="14" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
                        </svg>
                        Export CSV
                    </button>
                </div>
                <div class="table-container" id="cvPreviewTable">
                    <!-- Filled by JS -->
                </div>
            </div>

            <!-- Google Sheets Integration Card -->
            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z"/>
                        </svg>
                        Google Sheets Sync
                    </div>
                    <span class="cv-sheets-status connected" id="cvSheetsStatus">Connected</span>
                </div>
                <div class="card-body">
                    <div class="cv-sheets-setup" id="cvSheetsSetup" style="display: none;">
                        <p style="font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px;">
                            Sheets are pre-configured for each position.
                        </p>
                        <input type="hidden" id="cvSheetId" value="">
                        <button class="btn btn-primary" id="cvConnectSheetBtn">
                            <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"/>
                            </svg>
                            Reconnect
                        </button>
                    </div>
                    <div class="cv-sheets-connected" id="cvSheetsConnected">
                        <div class="cv-sheets-info">
                            <span class="cv-sheets-name" id="cvSheetName">5 position sheets configured (QB, RB, WR, TE, DST)</span>
                            <span class="cv-api-status" id="cvApiStatus" style="margin-left: 10px; font-size: 0.8rem; color: var(--text-secondary);"></span>
                        </div>
                        <div class="cv-sheets-actions">
                            <button class="btn btn-secondary" id="cvSetupAutoPushBtn" title="Configure automatic push to Google Sheets">
                                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                                </svg>
                                Setup Auto-Push
                            </button>
                            <button class="btn btn-primary" id="cvSyncToSheetBtn">
                                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"/>
                                </svg>
                                Push to Sheet
                            </button>
                            <button class="btn btn-secondary" id="cvPullFromSheetBtn">
                                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
                                </svg>
                                Pull from Sheet
                            </button>
                        </div>
                        <!-- Apps Script URL Setup (hidden by default) -->
                        <div class="cv-apps-script-setup" id="cvAppsScriptSetup" style="display: none; margin-top: 10px; padding: 10px; background: var(--bg-secondary); border-radius: 8px;">
                            <p style="margin: 0 0 8px 0; font-size: 0.85rem; color: var(--text-secondary);">
                                Paste your Google Apps Script Web App URL below.
                                <a href="https://script.google.com" target="_blank" style="color: var(--accent-primary);">Create one here</a> using the code from google-apps-script.js
                            </p>
                            <div style="display: flex; gap: 8px;">
                                <input type="text" id="cvAppsScriptUrlInput" placeholder="https://script.google.com/macros/s/XXXXX/exec"
                                    style="flex: 1; padding: 8px; border-radius: 6px; border: 1px solid var(--border-color); background: var(--bg-primary); color: var(--text-primary);">
                                <button class="btn btn-primary" id="cvSaveAppsScriptBtn">Save</button>
                                <button class="btn btn-secondary" id="cvCancelAppsScriptBtn">Cancel</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- All Positions Data Summary -->
            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
                        </svg>
                        Position Data Summary
                    </div>
                    <button class="btn btn-secondary" id="cvExportAllBtn">
                        <svg width="14" height="14" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
                        </svg>
                        Export All CSVs
                    </button>
                </div>
                <div class="card-body">
                    <p style="font-size: 0.8rem; color: var(--text-muted); margin-bottom: 12px;">
                        Click a position to push NEW records to Google Sheet (Pull from Sheet first to avoid duplicates)
                    </p>
                    <div class="cv-position-summary" id="cvPositionSummary">
                        <div class="cv-pos-card clickable" data-pos="QB" title="Click to push NEW QB data to Google Sheet">
                            <div class="cv-pos-badge qb">QB</div>
                            <div class="cv-pos-count" id="cvQBCount">0</div>
                            <div class="cv-pos-label">new</div>
                        </div>
                        <div class="cv-pos-card clickable" data-pos="RB" title="Click to push NEW RB data to Google Sheet">
                            <div class="cv-pos-badge rb">RB</div>
                            <div class="cv-pos-count" id="cvRBCount">0</div>
                            <div class="cv-pos-label">new</div>
                        </div>
                        <div class="cv-pos-card clickable" data-pos="WR" title="Click to push NEW WR data to Google Sheet">
                            <div class="cv-pos-badge wr">WR</div>
                            <div class="cv-pos-count" id="cvWRCount">0</div>
                            <div class="cv-pos-label">new</div>
                        </div>
                        <div class="cv-pos-card clickable" data-pos="TE" title="Click to push NEW TE data to Google Sheet">
                            <div class="cv-pos-badge te">TE</div>
                            <div class="cv-pos-count" id="cvTECount">0</div>
                            <div class="cv-pos-label">new</div>
                        </div>
                        <div class="cv-pos-card clickable" data-pos="DST" title="Click to push NEW DST data to Google Sheet">
                            <div class="cv-pos-badge dst">DST</div>
                            <div class="cv-pos-count" id="cvDSTCount">0</div>
                            <div class="cv-pos-label">new</div>
                        </div>
                    </div>
                    <!-- Push All Button -->
                    <div style="margin-top: 1rem; text-align: center;">
                        <button class="btn btn-primary" id="cvPushAllBtn" style="padding: 12px 24px; font-size: 1rem;">
                            <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="margin-right: 8px;">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                            </svg>
                            Push All Positions
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Team Detail Modal -->
    <div class="team-detail-overlay" id="teamDetailOverlay">
        <div class="team-detail-modal" id="teamDetailModal">
            <div class="team-detail-header" id="teamDetailHeader">
                <div class="team-detail-header-left">
                    <img class="team-logo" id="teamDetailLogo" src="" alt="">
                    <h2 id="teamDetailName">Team Name</h2>
                </div>
                <button class="team-detail-close" id="teamDetailClose">
                    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                    </svg>
                </button>
            </div>
            <div class="team-detail-body" id="teamDetailBody">
                <!-- Filled by JS -->
            </div>
        </div>
    </div>


    <!-- JavaScript Modules -->
    <script src="js/core/constants.js"></script>
    <script src="js/core/utils.js"></script>
    <script src="js/sports/madden/showdown.js"></script>
    <script src="js/sports/madden/classic.js"></script>
    <script src="js/sports/nba/showdown.js"></script>
    <script src="js/core/converter.js?v=3"></script>
    <script src="js/core/app.js"></script>
</body>
</html>
